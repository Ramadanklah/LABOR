var e=Object.defineProperty,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,a=(s,r,t)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,l=(e,l)=>{for(var o in l||(l={}))r.call(l,o)&&a(e,o,l[o]);if(s)for(var o of s(l))t.call(l,o)&&a(e,o,l[o]);return e};import{j as o}from"./dashboard-B7IYFwwG.js";import{r as n}from"./react-vendor-DFd6LVBd.js";import{a as i}from"./user-management-Wwo3c1st.js";function d({onLoginSuccess:e,onError:s}){const[r,t]=n.useState("email"),[a,d]=n.useState(""),[c,m]=n.useState(""),[u,x]=n.useState(""),[g,b]=n.useState(""),[h,p]=n.useState(""),[f,y]=n.useState(""),[j,v]=n.useState(!1);return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-indigo-100",children:o.jsx("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Laboratory Results System"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your laboratory results"})]}),o.jsx("form",{className:"mt-8 space-y-6",onSubmit:t=>{return o=this,n=function*(){t.preventDefault(),y(""),v(!0);try{const s=l(l({password:g},"email"===r?{email:a}:{bsnr:c,lanr:u}),h?{otp:h}:{}),t=yield i.post("/auth/login",s);t.success?(y(t.message),localStorage.setItem("authToken",t.token),localStorage.setItem("userInfo",JSON.stringify(t.user)),e&&e(t.token,t.user)):y(t.message||"Login failed")}catch(o){const e=o.message||"Network error or server unavailable";y(e),s&&s(new Error(e))}finally{v(!1)}},new Promise((e,s)=>{var r=e=>{try{l(n.next(e))}catch(t){s(t)}},a=e=>{try{l(n.throw(e))}catch(t){s(t)}},l=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,a);l((n=n.apply(o,null)).next())});var o,n},children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Login Method"}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"loginMethod",value:"email",checked:"email"===r,onChange:e=>t(e.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Email"})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",name:"loginMethod",value:"bsnr",checked:"bsnr"===r,onChange:e=>t(e.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"BSNR/LANR"})]})]})]}),"email"===r?o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsx("input",{type:"email",id:"email",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:a,onChange:e=>d(e.target.value),required:"email"===r,placeholder:"Enter your email address"})]}):o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bsnr",className:"block text-sm font-medium text-gray-700 mb-2",children:"BSNR"}),o.jsx("input",{type:"text",id:"bsnr",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:c,onChange:e=>m(e.target.value),required:"bsnr"===r,placeholder:"BSNR"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lanr",className:"block text-sm font-medium text-gray-700 mb-2",children:"LANR"}),o.jsx("input",{type:"text",id:"lanr",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:u,onChange:e=>x(e.target.value),required:"bsnr"===r,placeholder:"LANR"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsx("input",{type:"password",id:"password",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:g,onChange:e=>b(e.target.value),required:!0,placeholder:"Enter your password"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"2-Factor Code (if enabled)"}),o.jsx("input",{type:"text",id:"otp",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:h,onChange:e=>p(e.target.value),placeholder:"123456"})]}),o.jsx("button",{type:"submit",disabled:j,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150",children:j?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"}),f&&o.jsx("div",{className:"mt-4 p-3 rounded-md text-sm "+(f.includes("successful")||f.includes("Login successful")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:f})]})}),!1,o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Laboratory Results Management System"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Secure access to medical laboratory data"})]})]})})}export{d as default};
