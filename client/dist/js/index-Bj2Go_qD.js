const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/login-DyhrRl5C.js","js/dashboard-B7IYFwwG.js","js/react-vendor-DFd6LVBd.js","js/user-management-Wwo3c1st.js"])))=>i.map(i=>d[i]);
var e=(e,r,t)=>new Promise((s,n)=>{var o=e=>{try{a(t.next(e))}catch(r){n(r)}},i=e=>{try{a(t.throw(e))}catch(r){n(r)}},a=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,i);a((t=t.apply(e,r)).next())});import{j as r}from"./dashboard-B7IYFwwG.js";import{a as t,r as s,R as n}from"./react-vendor-DFd6LVBd.js";import{a as o}from"./user-management-Wwo3c1st.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var i={},a=t;i.createRoot=a.createRoot,i.hydrateRoot=a.hydrateRoot;const c={},l=function(e,r,t){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(r.map(e=>{if((e=function(e){return"/"+e}(e))in c)return;c[e]=!0;const r=e.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=r?"stylesheet":"modulepreload",r||(n.as="script"),n.crossOrigin="",n.href=e,t&&n.setAttribute("nonce",t),document.head.appendChild(n),r?new Promise((r,t)=>{n.addEventListener("load",r),n.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return s.then(r=>{for(const e of r||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},d=new class{constructor(){this.metrics=new Map,this.observers=new Map,this.thresholds={LCP:2500,FID:100,CLS:.1,FCP:1800,TTFB:800},this.init()}init(){this.observeWebVitals(),this.observeResourceLoading(),this.observeUserInteractions(),setInterval(()=>this.logMetrics(),3e4)}observeWebVitals(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(e=>{const r=e.getEntries(),t=r[r.length-1];this.recordMetric("LCP",t.startTime)});e.observe({type:"largest-contentful-paint",buffered:!0}),this.observers.set("LCP",e)}catch(e){}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("FID",e.processingStart-e.startTime)})});e.observe({type:"first-input",buffered:!0}),this.observers.set("FID",e)}catch(e){}try{const e=new PerformanceObserver(e=>{let r=0;e.getEntries().forEach(e=>{e.hadRecentInput||(r+=e.value)}),this.recordMetric("CLS",r)});e.observe({type:"layout-shift",buffered:!0}),this.observers.set("CLS",e)}catch(e){}}if(window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("paint").forEach(e=>{"first-contentful-paint"===e.name&&this.recordMetric("FCP",e.startTime)}),window.performance&&window.performance.timing){const{responseStart:e,navigationStart:r}=window.performance.timing,t=e-r;this.recordMetric("TTFB",t)}}observeResourceLoading(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType?this.recordAPIMetric(e.name,e.duration):"script"===e.initiatorType?this.recordResourceMetric("script",e.duration,e.transferSize):"css"===e.initiatorType?this.recordResourceMetric("css",e.duration,e.transferSize):"img"===e.initiatorType&&this.recordResourceMetric("image",e.duration,e.transferSize)})});e.observe({entryTypes:["resource"]}),this.observers.set("resource",e)}catch(e){}}observeUserInteractions(){let e;document.addEventListener("click",e=>{const r=performance.now();requestAnimationFrame(()=>{const e=performance.now()-r;this.recordMetric("click_response",e)})}),document.addEventListener("scroll",()=>{e||(e=performance.now())},{passive:!0}),document.addEventListener("scrollend",()=>{if(e){const r=performance.now()-e;this.recordMetric("scroll_duration",r),e=null}},{passive:!0})}recordMetric(e,r){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push({value:r,timestamp:Date.now()}),this.thresholds[e]&&this.thresholds[e]}recordAPIMetric(e,r){this.recordMetric("api_response_time",r),this.metrics.has("api_calls")||this.metrics.set("api_calls",new Map);const t=this.metrics.get("api_calls");t.has(e)||t.set(e,[]),t.get(e).push({duration:r,timestamp:Date.now()})}recordResourceMetric(e,r,t){this.recordMetric(`${e}_load_time`,r),t&&this.recordMetric(`${e}_size`,t)}getPerformanceSummary(){const e={};return this.metrics.forEach((r,t)=>{var s;if(Array.isArray(r)){const n=r.slice(-10);e[t]={average:n.reduce((e,r)=>e+r.value,0)/n.length,latest:null==(s=n[n.length-1])?void 0:s.value,count:r.length,max:Math.max(...n.map(e=>e.value)),min:Math.min(...n.map(e=>e.value))}}else r instanceof Map&&(e[t]={},r.forEach((r,s)=>{const n=r.slice(-5);e[t][s]={average:n.reduce((e,r)=>e+r.duration,0)/n.length,count:r.length}}))}),e}logMetrics(){const e=this.getPerformanceSummary();["LCP","FID","CLS","FCP","TTFB"].forEach(r=>{e[r]&&this.getMetricStatus(r,e[r].latest)}),e.api_calls&&Object.keys(e.api_calls).length>0&&Object.entries(e.api_calls).forEach(([e,r])=>{}),["script","css","image"].forEach(r=>{e[`${r}_load_time`],e[`${r}_size`]})}getMetricStatus(e,r){if(!this.thresholds[e]||void 0===r)return"";const t=this.thresholds[e];return"CLS"===e?r<=.1?"âœ…":r<=.25?"âš ï¸":"âŒ":r<=t?"âœ…":r<=1.5*t?"âš ï¸":"âŒ"}measureFunction(r,t){return(...s)=>e(this,null,function*(){const e=performance.now();try{const n=yield t(...s),o=performance.now()-e;return this.recordMetric(`function_${r}`,o),n}catch(n){const t=performance.now()-e;throw this.recordMetric(`function_${r}_error`,t),n}})}measureComponentRender(e){return r=>class extends React.Component{componentDidMount(){const r=performance.now();this.startTime&&d.recordMetric(`component_${e}_mount`,r-this.startTime)}componentDidUpdate(){const r=performance.now();this.updateStartTime&&d.recordMetric(`component_${e}_update`,r-this.updateStartTime)}render(){return this.startTime=performance.now(),this.updateStartTime=performance.now(),React.createElement(r,this.props)}}}generateReport(){const e=this.getPerformanceSummary();return{timestamp:(new Date).toISOString(),summary:e,recommendations:this.getRecommendations(e)}}getRecommendations(e){var r,t,s,n,o,i;const a=[];return(null==(r=e.LCP)?void 0:r.latest)>this.thresholds.LCP&&a.push("Improve Largest Contentful Paint by optimizing images and critical resources"),(null==(t=e.FID)?void 0:t.latest)>this.thresholds.FID&&a.push("Reduce First Input Delay by optimizing JavaScript execution"),(null==(s=e.CLS)?void 0:s.latest)>this.thresholds.CLS&&a.push("Improve Cumulative Layout Shift by setting image dimensions and avoiding dynamic content insertion"),(null==(n=e.api_response_time)?void 0:n.average)>1e3&&a.push("Optimize API response times - consider caching or backend optimizations"),(null==(o=e.script_size)?void 0:o.average)>1e5&&a.push("Consider code splitting to reduce JavaScript bundle size"),(null==(i=e.css_size)?void 0:i.average)>5e4&&a.push("Optimize CSS bundle size and remove unused styles"),a}cleanup(){this.observers.forEach(e=>{e.disconnect()}),this.observers.clear()}},m=s.lazy(()=>l(()=>import("./login-DyhrRl5C.js"),__vite__mapDeps([0,1,2,3]))),h=s.lazy(()=>l(()=>import("./dashboard-B7IYFwwG.js").then(e=>e.R),__vite__mapDeps([1,2]))),u=s.lazy(()=>l(()=>import("./user-management-Wwo3c1st.js").then(e=>e.U),__vite__mapDeps([3,1,2])));class p extends n.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:r.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Application Error"}),r.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[r.jsx("p",{children:"Something went wrong. Please refresh the page or contact support."}),!1]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"bg-red-100 hover:bg-red-200 text-red-800 font-bold py-2 px-4 rounded transition-colors duration-150",children:"Reload Application"})})]})]})})})}):this.props.children}}const x=()=>r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading application..."})]})}),f=({currentUser:e,currentView:t,onViewChange:s,onLogout:n})=>{var o,i,a;const c=[{id:"dashboard",name:"Dashboard",icon:"ðŸ“Š",allowedRoles:["admin","doctor","lab_technician","patient"]},{id:"users",name:"User Management",icon:"ðŸ‘¥",allowedRoles:["admin"]}].filter(r=>r.allowedRoles.includes(e.role));return r.jsxs("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between h-16",children:[r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Laboratory Results System"})}),r.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:c.map(e=>r.jsxs("button",{onClick:()=>s(e.id),className:(t===e.id?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-150",children:[r.jsx("span",{className:"mr-2",children:e.icon}),e.name]},e.id))})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center",children:r.jsxs("span",{className:"text-sm font-medium text-indigo-700",children:[null==(o=e.firstName)?void 0:o.charAt(0),null==(i=e.lastName)?void 0:i.charAt(0)]})})}),r.jsxs("div",{className:"hidden md:block",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),r.jsx("div",{className:"text-xs text-gray-500 capitalize",children:null==(a=e.role)?void 0:a.replace("_"," ")})]})]}),r.jsxs("button",{onClick:n,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-150",children:[r.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})}),r.jsx("div",{className:"sm:hidden",children:r.jsx("div",{className:"pt-2 pb-3 space-y-1",children:c.map(e=>r.jsxs("button",{onClick:()=>s(e.id),className:(t===e.id?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50")+" block pl-3 pr-4 py-2 border-l-4 text-base font-medium w-full text-left transition-colors duration-150",children:[r.jsx("span",{className:"mr-2",children:e.icon}),e.name]},e.id))})})]})};function g(){const[t,n]=s.useState(null),[i,a]=s.useState(null),[c,l]=s.useState(!1),[g,v]=s.useState(!0),[b,y]=s.useState(null),[j,w]=s.useState("dashboard");s.useEffect(()=>{(()=>{e(this,null,function*(){try{const r=localStorage.getItem("authToken"),t=localStorage.getItem("userInfo");if(r&&t)try{const e=yield o.get("/auth/me");e.success?(n(r),a(e.user),l(!0)):(localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"))}catch(e){localStorage.removeItem("authToken"),localStorage.removeItem("userInfo")}}catch(e){y("Failed to initialize application")}finally{v(!1)}})})()},[]);const N=()=>e(this,null,function*(){try{yield o.post("/auth/logout")}catch(e){}finally{n(null),a(null),l(!1),w("dashboard"),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),o.clearCache(),d.recordMetric("user_logout",Date.now())}}),S=e=>{y(e.message||"An unexpected error occurred")};return g?r.jsx(p,{children:r.jsx(x,{})}):b?r.jsx(p,{children:r.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:r.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Application Error"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:r.jsx("p",{children:b})}),r.jsxs("div",{className:"mt-4",children:[r.jsx("button",{onClick:()=>{y(null)},className:"bg-red-100 hover:bg-red-200 text-red-800 font-bold py-2 px-4 rounded mr-2 transition-colors duration-150",children:"Retry"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded transition-colors duration-150",children:"Reload Page"})]})]})]})})})})}):c&&i?r.jsx(p,{children:r.jsxs("div",{className:"App min-h-screen bg-gray-100",children:[r.jsx(f,{currentUser:i,currentView:j,onViewChange:e=>{w(e),d.recordMetric("navigation",Date.now())},onLogout:N}),r.jsx("main",{className:"py-6",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(s.Suspense,{fallback:r.jsx(x,{}),children:["dashboard"===j&&r.jsx(h,{token:t,currentUser:i,onLogout:N,onError:S}),"users"===j&&"admin"===i.role&&r.jsx(u,{currentUser:i,onError:S})]})})})]})}):r.jsx(p,{children:r.jsx("div",{className:"App",children:r.jsx(s.Suspense,{fallback:r.jsx(x,{}),children:r.jsx(m,{onLoginSuccess:(e,r)=>{n(e),a(r),l(!0),w("dashboard"),o.clearCache(),d.recordMetric("user_login",Date.now())},onError:S})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})}),i.createRoot(document.getElementById("root")).render(r.jsx(n.StrictMode,{children:r.jsx(g,{})}));
