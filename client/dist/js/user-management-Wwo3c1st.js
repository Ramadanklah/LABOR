var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,l=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&n(e,t,s[t]);if(r)for(var t of r(s))i.call(s,t)&&n(e,t,s[t]);return e},o=(e,r)=>s(e,t(r)),d=(e,s,t)=>new Promise((r,a)=>{var i=e=>{try{l(t.next(e))}catch(s){a(s)}},n=e=>{try{l(t.throw(e))}catch(s){a(s)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,n);l((t=t.apply(e,s)).next())});import{j as c}from"./dashboard-B7IYFwwG.js";import{r as u}from"./react-vendor-DFd6LVBd.js";const m=new class{constructor(){this.baseURL="/api",this.cache=new Map,this.requestInterceptors=[],this.responseInterceptors=[],this.pendingRequests=new Map,this.defaultOptions={headers:{"Content-Type":"application/json"}},this.cacheConfig={defaultTTL:3e5,maxSize:100}}addRequestInterceptor(e){this.requestInterceptors.push(e)}addResponseInterceptor(e){this.responseInterceptors.push(e)}applyRequestInterceptors(e,s){return d(this,null,function*(){let t=l({},s);for(const s of this.requestInterceptors)t=yield s(e,t);return t})}applyResponseInterceptors(e){return d(this,null,function*(){let s=e;for(const e of this.responseInterceptors)s=yield e(s);return s})}getCacheKey(e,s){return`${s.method||"GET"}-${e}-${s.body?JSON.stringify(s.body):""}-${s.params?JSON.stringify(s.params):""}`}deduplicateRequest(e,s){return d(this,null,function*(){if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const t=s();this.pendingRequests.set(e,t);try{return yield t}finally{this.pendingRequests.delete(e)}})}setCache(e,s,t=this.cacheConfig.defaultTTL){if(this.cache.size>=this.cacheConfig.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,{data:s,timestamp:Date.now(),ttl:t})}getCache(e){const s=this.cache.get(e);return s?Date.now()-s.timestamp>s.ttl?(this.cache.delete(e),null):s.data:null}retry(e,s=3,t=1e3){return d(this,null,function*(){try{return yield e()}catch(r){if(s>0&&r.status>=500){const r=100*Math.random();return yield new Promise(e=>setTimeout(e,t+r)),this.retry(e,s-1,2*t)}throw r}})}request(e){return d(this,arguments,function*(e,s={}){const t=`${this.baseURL}${e}`,r=o(l(l({},this.defaultOptions),s),{headers:l(l({},this.defaultOptions.headers),s.headers)}),a=yield this.applyRequestInterceptors(t,r),i=this.getCacheKey(t,a);if("GET"===a.method||!a.method){const e=this.getCache(i);if(e)return e}const n=()=>d(this,null,function*(){const e=yield fetch(t,a);if(!e.ok){let t=`HTTP error! status: ${e.status}`;try{const s=yield e.json();s.message&&(t=s.message)}catch(s){t=e.statusText||t}const r=new Error(t);throw r.status=e.status,r.response=e,r}return e}),c=yield this.deduplicateRequest(i,()=>this.retry(n)),u=yield this.applyResponseInterceptors(c);let m;const h=u.headers.get("content-type");if(m=(null==h?void 0:h.includes("application/json"))?yield u.json():yield u.text(),"GET"===a.method||!a.method){const e=a.cacheTimeout||this.cacheConfig.defaultTTL;this.setCache(i,m,e)}return m})}get(e,s={}){return this.request(e,o(l({},s),{method:"GET"}))}post(e,s,t={}){return this.request(e,o(l({},t),{method:"POST",body:JSON.stringify(s)}))}put(e,s,t={}){return this.request(e,o(l({},t),{method:"PUT",body:JSON.stringify(s)}))}delete(e,s={}){return this.request(e,o(l({},s),{method:"DELETE"}))}download(e){return d(this,arguments,function*(e,s={}){const t=`${this.baseURL}${e}`,r=yield this.applyRequestInterceptors(t,l(l({},this.defaultOptions),s)),a=yield fetch(t,r);if(!a.ok){const e=new Error(`Download failed: ${a.status}`);throw e.status=a.status,e}return a})}clearCache(e=null){if(e)for(const s of this.cache.keys())s.includes(e)&&this.cache.delete(s);else this.cache.clear()}clearCacheEntry(e,s={}){const t=this.getCacheKey(`${this.baseURL}${e}`,s);this.cache.delete(t)}getCacheStats(){return{size:this.cache.size,maxSize:this.cacheConfig.maxSize,pendingRequests:this.pendingRequests.size}}};m.addRequestInterceptor((e,s)=>d(void 0,null,function*(){const e=localStorage.getItem("authToken");return e&&(s.headers.Authorization=`Bearer ${e}`),s})),m.addResponseInterceptor(e=>d(void 0,null,function*(){return 401===e.status&&(localStorage.removeItem("authToken"),window.location.href="/login"),e}));const h=({isOpen:e,onClose:s,onUserCreated:t,roles:r})=>{const[a,i]=u.useState({firstName:"",lastName:"",email:"",password:"",role:"doctor",bsnr:"",lanr:"",specialization:"",department:"",isActive:!0}),[n,h]=u.useState(!1),[x,g]=u.useState("");return e?c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New User"}),x&&c.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-3",children:c.jsx("p",{className:"text-sm text-red-800",children:x})}),c.jsxs("form",{onSubmit:e=>d(void 0,null,function*(){e.preventDefault(),h(!0),g("");try{const e=yield m.post("/users",a);e.success&&(t(e.user),i({firstName:"",lastName:"",email:"",password:"",role:"doctor",bsnr:"",lanr:"",specialization:"",department:"",isActive:!0}))}catch(s){g(s.message)}finally{h(!1)}}),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.firstName,onChange:e=>i(o(l({},a),{firstName:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.lastName,onChange:e=>i(o(l({},a),{lastName:e.target.value}))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.email,onChange:e=>i(o(l({},a),{email:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.password,onChange:e=>i(o(l({},a),{password:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsx("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.role,onChange:e=>i(o(l({},a),{role:e.target.value})),children:r.map(e=>c.jsx("option",{value:e.value,children:e.key.replace("_"," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())},e.value))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BSNR"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.bsnr,onChange:e=>i(o(l({},a),{bsnr:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LANR"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a.lanr,onChange:e=>i(o(l({},a),{lanr:e.target.value}))})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:a.isActive,onChange:e=>i(o(l({},a),{isActive:e.target.checked}))}),c.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active User"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:n?"Creating...":"Create User"})]})]})]})})}):null},x=({isOpen:e,user:s,onClose:t,onUserUpdated:r,roles:a})=>{var i;const[n,h]=u.useState({firstName:(null==s?void 0:s.firstName)||"",lastName:(null==s?void 0:s.lastName)||"",email:(null==s?void 0:s.email)||"",role:(null==s?void 0:s.role)||"doctor",bsnr:(null==s?void 0:s.bsnr)||"",lanr:(null==s?void 0:s.lanr)||"",specialization:(null==s?void 0:s.specialization)||"",department:(null==s?void 0:s.department)||"",isActive:null==(i=null==s?void 0:s.isActive)||i}),[x,g]=u.useState(!1),[p,f]=u.useState("");return u.useEffect(()=>{var e;s&&h({firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",role:s.role||"doctor",bsnr:s.bsnr||"",lanr:s.lanr||"",specialization:s.specialization||"",department:s.department||"",isActive:null==(e=s.isActive)||e})},[s]),e&&s?c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit User"}),p&&c.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-3",children:c.jsx("p",{className:"text-sm text-red-800",children:p})}),c.jsxs("form",{onSubmit:e=>d(void 0,null,function*(){e.preventDefault(),g(!0),f("");try{const e=yield m.put(`/users/${s.id}`,n);e.success&&r(e.user)}catch(t){f(t.message)}finally{g(!1)}}),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:n.firstName,onChange:e=>h(o(l({},n),{firstName:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:n.lastName,onChange:e=>h(o(l({},n),{lastName:e.target.value}))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:n.email,onChange:e=>h(o(l({},n),{email:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsx("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:n.role,onChange:e=>h(o(l({},n),{role:e.target.value})),children:a.map(e=>c.jsx("option",{value:e.value,children:e.key.replace("_"," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())},e.value))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BSNR"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:n.bsnr,onChange:e=>h(o(l({},n),{bsnr:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LANR"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:n.lanr,onChange:e=>h(o(l({},n),{lanr:e.target.value}))})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:n.isActive,onChange:e=>h(o(l({},n),{isActive:e.target.checked}))}),c.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active User"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:x?"Updating...":"Update User"})]})]})]})})}):null},g=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:e})=>{const[s,t]=u.useState([]),[r,a]=u.useState(!0),[i,n]=u.useState(""),[g,p]=u.useState(!1),[f,v]=u.useState(!1),[b,y]=u.useState(null),[j,N]=u.useState({search:"",role:"",isActive:""}),[w,k]=u.useState(null),[C,L]=u.useState([]),A=u.useCallback(()=>d(void 0,null,function*(){try{a(!0);const e=yield m.get("/users",{params:j});e.success&&(t(e.users),k(e.stats),n(""))}catch(e){n("Failed to fetch users")}finally{a(!1)}}),[j]),S=u.useCallback(()=>d(void 0,null,function*(){try{const e=yield m.get("/roles");e.success&&L(e.roles)}catch(e){}}),[]);u.useEffect(()=>{A(),S()},[A,S]);const R=u.useMemo(()=>(Array.isArray(s)?s:[]).filter(e=>{const s=!j.search||e.firstName.toLowerCase().includes(j.search.toLowerCase())||e.lastName.toLowerCase().includes(j.search.toLowerCase())||e.email.toLowerCase().includes(j.search.toLowerCase())||e.bsnr&&e.bsnr.includes(j.search)||e.lanr&&e.lanr.includes(j.search),t=!j.role||e.role===j.role,r=""===j.isActive||e.isActive.toString()===j.isActive;return s&&t&&r}),[s,j]),q=e=>{const s=C.find(s=>s.value===e);return s?s.key.replace("_"," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase()):e},U=e=>{switch(e){case"admin":return"bg-purple-100 text-purple-800";case"doctor":return"bg-blue-100 text-blue-800";case"lab_technician":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return r?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage users, roles, and permissions across the system"})]}),c.jsx("div",{className:"mt-4 sm:mt-0",children:c.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[c.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add User"]})})]}),w&&c.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:c.jsxs("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Users"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:w.total})]})})]})})}),c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:c.jsxs("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Users"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:w.active})]})})]})})}),c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:c.jsxs("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Doctors"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:w.byRole.doctor})]})})]})})}),c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m14-6h2m-2 6h2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:c.jsxs("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Lab Technicians"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:w.byRole.lab_technician})]})})]})})})]}),c.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filters"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),c.jsx("input",{type:"text",id:"search",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Search by name, email, BSNR, LANR...",value:j.search,onChange:e=>N(o(l({},j),{search:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),c.jsxs("select",{id:"role",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",value:j.role,onChange:e=>N(o(l({},j),{role:e.target.value})),children:[c.jsx("option",{value:"",children:"All Roles"}),C.map(e=>c.jsx("option",{value:e.value,children:q(e.value)},e.value))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),c.jsxs("select",{id:"status",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",value:j.isActive,onChange:e=>N(o(l({},j),{isActive:e.target.value})),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"true",children:"Active"}),c.jsx("option",{value:"false",children:"Inactive"})]})]})]})]}),i&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-800",children:i})})]})}),c.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:c.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Users (",R.length,")"]}),c.jsxs("button",{onClick:A,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[c.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BSNR/LANR"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(r=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[r.firstName.charAt(0),r.lastName.charAt(0)]})})}),c.jsxs("div",{className:"ml-4",children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[r.firstName," ",r.lastName]}),c.jsx("div",{className:"text-sm text-gray-500",children:r.email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U(r.role)}`,children:q(r.role)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.bsnr&&r.lanr?`${r.bsnr} / ${r.lanr}`:"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(r.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:r.isActive?"Active":"Inactive"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.lastLogin?new Date(r.lastLogin).toLocaleDateString():"Never"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>{y(r),v(!0)},className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),c.jsx("button",{onClick:()=>{return e=r.id,a=r.isActive,d(void 0,null,function*(){try{(yield m.put(`/users/${e}`,{isActive:!a})).success&&t(s.map(s=>s.id===e?o(l({},s),{isActive:!a}):s))}catch(r){alert("Failed to update user status: "+r.message)}});var e,a},className:r.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900",children:r.isActive?"Deactivate":"Activate"}),r.id!==e.id&&c.jsx("button",{onClick:()=>{return e=r.id,d(void 0,null,function*(){if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{(yield m.delete(`/users/${e}`)).success&&(t(s.filter(s=>s.id!==e)),alert("User deleted successfully"))}catch(r){alert("Failed to delete user: "+r.message)}});var e},className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},r.id))})]})}),0===R.length&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No users found matching your criteria."})})]})}),g&&c.jsx(h,{isOpen:g,onClose:()=>p(!1),onUserCreated:e=>{t([...s,e]),p(!1)},roles:C}),f&&b&&c.jsx(x,{isOpen:f,user:b,onClose:()=>{v(!1),y(null)},onUserUpdated:e=>{t(s.map(s=>s.id===e.id?e:s)),v(!1),y(null)},roles:C})]})}},Symbol.toStringTag,{value:"Module"}));export{g as U,m as a};
