var e=Object.defineProperty,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,a=(s,r,t)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,l=(e,l)=>{for(var n in l||(l={}))r.call(l,n)&&a(e,n,l[n]);if(s)for(var n of s(l))t.call(l,n)&&a(e,n,l[n]);return e};import{j as n}from"./dashboard-B7IYFwwG.js";import{r as o}from"./react-vendor-DFd6LVBd.js";import{a as i}from"./user-management-CtzpN0tF.js";function d({onLoginSuccess:e,onError:s}){const[r,t]=o.useState("email"),[a,d]=o.useState(""),[c,m]=o.useState(""),[u,x]=o.useState(""),[g,h]=o.useState(""),[b,p]=o.useState(""),[f,y]=o.useState(""),[j,v]=o.useState(!1);return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-indigo-100",children:n.jsx("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Laboratory Results System"}),n.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your laboratory results"})]}),n.jsx("form",{className:"mt-8 space-y-6",onSubmit:s=>{return t=this,n=function*(){s.preventDefault(),y(""),v(!0);try{const s=l(l({password:g},"email"===r?{email:a}:{bsnr:c,lanr:u}),b?{otp:b}:{}),t=yield i.post("/auth/login",s);t.success?(y(t.message),localStorage.setItem("authToken",t.token),localStorage.setItem("userInfo",JSON.stringify(t.user)),e&&e(t.token,t.user)):y(t.message||"Login failed")}catch(t){const e="TypeError"===(null==t?void 0:t.name)?"Netzwerkfehler: Server nicht erreichbar. Bitte erneut versuchen.":t.message||"Unbekannter Fehler beim Anmelden";y(e)}finally{v(!1)}},new Promise((e,r)=>{var a=e=>{try{o(n.next(e))}catch(s){r(s)}},l=e=>{try{o(n.throw(e))}catch(s){r(s)}},o=s=>s.done?e(s.value):Promise.resolve(s.value).then(a,l);o((n=n.apply(t,null)).next())});var t,n},children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Login Method"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",name:"loginMethod",value:"email",checked:"email"===r,onChange:e=>t(e.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Email"})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",name:"loginMethod",value:"bsnr",checked:"bsnr"===r,onChange:e=>t(e.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"BSNR/LANR"})]})]})]}),"email"===r?n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),n.jsx("input",{type:"email",id:"email",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:a,onChange:e=>d(e.target.value),required:"email"===r,placeholder:"Enter your email address"})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"bsnr",className:"block text-sm font-medium text-gray-700 mb-2",children:"BSNR"}),n.jsx("input",{type:"text",id:"bsnr",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:c,onChange:e=>m(e.target.value),required:"bsnr"===r,placeholder:"BSNR"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"lanr",className:"block text-sm font-medium text-gray-700 mb-2",children:"LANR"}),n.jsx("input",{type:"text",id:"lanr",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:u,onChange:e=>x(e.target.value),required:"bsnr"===r,placeholder:"LANR"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsx("input",{type:"password",id:"password",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:g,onChange:e=>h(e.target.value),required:!0,placeholder:"Enter your password"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"2-Factor Code (if enabled)"}),n.jsx("input",{type:"text",id:"otp",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md py-2 px-3",value:b,onChange:e=>p(e.target.value),placeholder:"123456"})]}),n.jsx("button",{type:"submit",disabled:j,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150",children:j?n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"}),f&&n.jsx("div",{className:"mt-4 p-3 rounded-md text-sm "+(f.includes("successful")||f.includes("Login successful")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:f})]})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Laboratory Results Management System"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Secure access to medical laboratory data"})]})]})})}export{d as default};
